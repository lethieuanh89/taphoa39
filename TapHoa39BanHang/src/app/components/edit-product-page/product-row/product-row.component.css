.product-row-container {
  border-bottom: 1px solid #e0e0e0;
  transition: background-color 0.2s ease;
  position: relative;
}

.product-row-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: inherit;
  opacity: 1;
  z-index: -1;
}

.product-row-container:hover {
  filter: brightness(0.92);
}

.master-row {
  display: flex;
  min-height: 45px;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  position: relative;
  cursor: pointer;
  user-select: none;
  min-width: fit-content;
}

.master-row.expanded {
  border-bottom: 2px solid #667eea;
}

/* Override cursor for input fields */
.master-row input {
  cursor: text;
}

/* Cell Widths - Match header exactly */
.expand-cell { width: 40px; flex-shrink: 0; }
.checkbox-cell { width: 40px; flex-shrink: 0; }
.image-cell { width: 60px; flex-shrink: 0; }
.code-cell { width: 130px; flex-shrink: 0; }
.name-cell { width: 220px; flex-shrink: 0; }
.price-cell { width: 100px; flex-shrink: 0; }
.cost-cell { width: 100px; flex-shrink: 0; }
.onhand-cell { width: 90px; flex-shrink: 0; }
.unit-cell { width: 80px; flex-shrink: 0; }
.box-cell { width: 80px; flex-shrink: 0; }
.retail-cell { width: 80px; flex-shrink: 0; }
.discount-cell { width: 100px; flex-shrink: 0; }
.discount2-cell { width: 100px; flex-shrink: 0; }
.totalprice-cell { width: 130px; flex-shrink: 0; }

/* Expand Button */
.expand-cell {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
}

.expand-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.expand-btn:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.expand-btn mat-icon {
  font-size: 20px;
  width: 20px;
  height: 20px;
  color: #667eea;
}

.child-count {
  font-size: 10px;
  color: #666;
  font-weight: 600;
  background: #f0f0f0;
  padding: 1px 5px;
  border-radius: 8px;
}

/* Checkbox Cell */
.checkbox-cell {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Image Cell */
.image-cell {
  display: flex;
  align-items: center;
  justify-content: center;
}

.img-wrapper {
  width: 50px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: 4px;
  border: 1px solid #e0e0e0;
}

.product-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: cover;
}

/* Sticky Columns */
.sticky-column {
  position: sticky;
  background: inherit;
  z-index: 2;
  box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);
}

.code-cell.sticky-column {
  left: 156px; /* 40px (expand) + 40px (checkbox) + 60px (image) + 8px*2 (gaps) */
}

.name-cell.sticky-column {
  left: 294px; /* 40 + 40 + 60 + 8*3 (gaps) + 130 (code) */
}

/* Cell Inputs */
.cell-input {
  width: calc(100% - 4px);
  height: 36px;
  border: 1px solid transparent;
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 13px;
  background: rgba(255, 255, 255, 0.8);
  transition: all 0.2s ease;
  outline: none;
  box-sizing: border-box;
}

.cell-input:hover {
  background: rgba(255, 255, 255, 0.95);
  border-color: #ccc;
}

.cell-input:focus {
  background: #fff;
  border-color: #667eea;
  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
}

.name-input {
  font-weight: 500;
}

.numeric-input {
  text-align: right;
 
}

.total-input {
  background-color: #fff9e6;
  font-weight: 600;
}

.total-input:focus {
  background-color: #fff;
  border-color: #ff9800;
  box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.1);
}

/* Read-only values */
.readonly-value {
  display: block;
  padding: 0px 8px 0;
  font-size: 13px;
  color: #333;
  text-align: right;
 
}

/* Value with diff indicator wrapper */
.value-with-diff {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  width: 100%;
}

/* Diff indicator (stock-style) */
.diff-indicator {
  position: absolute;
  bottom: -2px;
  display: flex;
  align-items: center;
  gap: 2px;
  font-size: 10px;
  font-weight: 600;
  padding: 1px 4px;
  border-radius: 3px;
  white-space: nowrap;
}

.diff-indicator.diff-increase {
  color: #014d34;
}

.diff-indicator.diff-decrease {
  color: #ef4444;
}

.diff-arrow {
  font-size: 12px !important;
  width: 12px !important;
  height: 12px !important;
  line-height: 12px !important;
}

.diff-value {
  font-size: 9px;
}

/* Price/Cost cells */
.price-cell,
.cost-cell,
.onhand-cell,
.box-cell,
.retail-cell,
.discount-cell,
.discount2-cell,
.totalprice-cell {
  display: flex;
  align-items: center;
  text-align: center;
}

/* Children Container */
.children-container {
  background: rgba(102, 126, 234, 0.03);
  border-top: 1px solid #e0e0e0;
  padding: 8px 0;
  animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    max-height: 0;
  }
  to {
    opacity: 1;
    max-height: 500px;
  }
}

/* Responsive adjustments */
@media (max-width: 1400px) {
  .master-row {
    font-size: 12px;
    gap: 6px;
  }

  .cell-input {
    font-size: 12px;
    height: 32px;
  }

  /* Responsive widths - match header */
  .expand-cell { width: 35px; }
  .checkbox-cell { width: 35px; }
  .image-cell { width: 50px; }
  .code-cell { width: 110px; }
  .name-cell { width: 180px; }
  .price-cell { width: 90px; }
  .cost-cell { width: 90px; }
  .onhand-cell { width: 70px; }
  .unit-cell { width: 70px; }
  .box-cell { width: 70px; }
  .retail-cell { width: 70px; }
  .discount-cell { width: 90px; }
  .discount2-cell { width: 90px; }
  .totalprice-cell { width: 110px; }

  .code-cell.sticky-column {
    left: 127px; /* 35 + 35 + 50 + 6*2 */
  }

  .name-cell.sticky-column {
    left: 249px; /* 35 + 35 + 50 + 6*3 + 110 + 6 */
  }
}
